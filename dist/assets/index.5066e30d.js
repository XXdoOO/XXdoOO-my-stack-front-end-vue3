import{d as D,r as v,u as I,P as b,c as d,e as m,f as n,h as g,v as F,l as k,k as f,g as h,w,F as V,Y as U,O as i,Z as E,$ as S,x as j,q as A,A as N,B as O,z as R,t as z,_ as L,C as M}from"./index.e0124a35.js";const p=u=>(N("data-v-cacdf70c"),u=u(),O(),u),P={class:"info"},T={class:"title"},$=p(()=>n("span",null,"\u6807\u9898\uFF1A",-1)),q={class:"description"},Y=p(()=>n("span",null,"\u63CF\u8FF0\uFF1A",-1)),Z={class:"cover"},G=p(()=>n("span",null,"\u5C01\u9762\uFF1A",-1)),H=["src"],J=D({__name:"index",setup(u){var r;const e=v({id:(r=I().params.blogId)!=null?r:"",title:"",description:"",cover:"",content:"# \u8BF7\u4F7F\u7528markdown\u8BED\u6CD5\n ## \u5F00\u59CB\u4F60\u7684\u8868\u6F14\n```js\nlet f = new Func();\nconsole.log(f.__proto__); // Object\n```"});e.value.id&&b(e.value.id).then(o=>{e.value=o,e.value.cover="/api/"+o.cover});const _=v(),x=o=>{e.value.cover=URL.createObjectURL(o.target.files[0])},y=()=>{if(e.value.title.trim().length!=0&&e.value.description.trim().length!=0&&e.value.content.trim().length!=0){const o=_.value.files[0],t=new FormData;o&&t.append("coverImg",o);for(let a in e.value)t.append(`${a}`,e.value[a]);e.value.id?U(t).then(a=>{i({type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}):E(t).then(()=>{i({type:"success",message:"\u53D1\u5E03\u6210\u529F"})})}else i({type:"error",message:"\u8BF7\u5B8C\u5584\u4FE1\u606F"})},B=(o,t,a)=>{const s=new FormData;s.append("image",a[0]),s.append("blogId",e.value.id.toString()),S(s).then(c=>{t({url:"/api/"+c})})},C=(o,t)=>{};return(o,t)=>{const a=L,s=j,c=A("v-md-editor");return d(),m(V,null,[n("div",P,[n("label",T,[$,g(n("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.value.title=l)},null,512),[[F,e.value.title]])]),n("label",q,[Y,g(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>e.value.description=l)},null,512),[[F,e.value.description]])]),n("label",Z,[G,e.value.cover?f("",!0):(d(),k(a,{key:0,icon:"add",style:{"font-size":"25px"}})),e.value.cover?(d(),m("img",{key:1,src:e.value.cover,width:"50",height:"50"},null,8,H)):f("",!0),n("input",{type:"file",hidden:"",accept:".jpg,.png",ref_key:"coverImg",ref:_,onChange:x},null,544)]),h(s,{class:"post",onClick:y},{default:w(()=>[R(z(e.value.id?"\u4FDD\u5B58":"\u53D1\u5E03"),1)]),_:1})]),h(c,{modelValue:e.value.content,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.content=l),onChange:C,"disabled-menus":[],onUploadImage:B},null,8,["modelValue"])],64)}}});const Q=M(J,[["__scopeId","data-v-cacdf70c"]]);export{Q as default};
