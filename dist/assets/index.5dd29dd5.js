import{d as I,a0 as R,r as y,c as D,e as z,f as c,t as r,g as t,a1 as A,I as j,_ as T,w as u,z as i,x as P,C as U,s as L,a as X,G as q,j as e,n as v,m as G,l as O,F as H,u as w,O as M,a2 as J,a3 as K,T as Q,q as W,y as Y,E as Z,h as ee,v as se}from"./index.08494208.js";import{B as ae}from"./BlogList.1b50ccfb.js";import{C as te}from"./index.0b3b9bcf.js";const ne={class:"title"},le={class:"footer"},oe=I({__name:"MyDialog",props:{title:null,visible:{type:Boolean},width:{default:"50%"}},emits:["update:visible","confirm"],setup(h,{emit:g}){const s=h;R(()=>s.visible,n=>{console.log(n),n?(_.value.style["z-index"]=1e3,_.value.style.opacity=1):(_.value.style["z-index"]=-1,_.value.style.opacity=0)});const _=y(),o=()=>{g("update:visible",!1)};return(n,l)=>{const p=T,C=P;return D(),z("div",{class:"mask",ref_key:"maskRef",ref:_,onClick:o},[c("div",{class:"dialog",onClick:l[1]||(l[1]=j(()=>{},["stop"]))},[c("div",ne,r(h.title),1),t(p,{class:"icon",icon:"cancel",onClick:o}),A(n.$slots,"default",{},void 0,!0),A(n.$slots,"footer",{},()=>[c("div",le,[t(C,{onClick:o,plain:""},{default:u(()=>[i("\u53D6\u6D88")]),_:1}),t(C,{onClick:l[0]||(l[0]=E=>g("confirm"))},{default:u(()=>[i("\u786E\u8BA4")]),_:1})])],!0)])],512)}}});const ue=U(oe,[["__scopeId","data-v-9e59c4e0"]]),ie={class:"container info"},ce={class:"avatar"},re=["src"],de={class:"nickname"},_e={class:"container menu"},me=I({__name:"index",setup(h){const g=L(),{userInfo:s}=X(g),_=q([]),o=y(0),n=y(!1),l=y(null),p=y(!1),C=w(),E=Y();let a=C.path;R(w(),f=>{a=f.path,x()});const x=()=>{a=="/my"?(l.value=null,n.value=!0,o.value=0):a=="/my/noPass"?(l.value=3,n.value=!0,o.value=100):a=="/my/auditing"?(l.value=2,n.value=!0,o.value=200):a=="/my/up"?(l.value=0,n.value=!1,o.value=300):a=="/my/down"?(l.value=1,n.value=!1,o.value=400):a=="/my/star"?(l.value=4,n.value=!1,o.value=500):a=="/my/history"&&(l.value=5,n.value=!1,o.value=600),_.length=0},B=y(),$=()=>{if(s.value.nickname.length==0)M({type:"error",message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A"});else{const f=new FormData,d=B.value.files[0];d&&f.append("avatar",d),f.append("nickname",s.value.nickname),J(f).then(F=>{p.value=!1,M({type:"success",message:"\u4FEE\u6539\u6210\u529F"})})}},N=()=>{te("\u786E\u8BA4\u6CE8\u9500\u6B64\u8D26\u53F7\u5417\uFF1F\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u56DE\uFF01",()=>{K().then(()=>{g.removeUserInfo(),E.push("/")})})};return x(),(f,d)=>{var b;const F=T,S=Q,V=P,m=W("router-link");return D(),z(H,null,[c("div",ie,[c("label",ce,[c("input",{type:"file",hidden:"",accept:".jpg,.png",ref_key:"avatarRef",ref:B,onChange:$},null,544),c("img",{src:`/api${e(s).avatar}`,alt:"\u7528\u6237\u5934\u50CF"},null,8,re),t(F,{class:"icon",icon:"edit"})]),c("span",de,r(e(s).nickname),1),t(F,{class:"icon",onClick:d[0]||(d[0]=k=>p.value=!0),icon:"edit"}),t(S,{class:"ip"},{default:u(()=>[i(r(e(s).ipTerritory),1)]),_:1}),t(V,{class:"cancel-account",type:"danger",onClick:N},{default:u(()=>[i("\u6CE8\u9500\u8D26\u6237")]),_:1})]),c("div",_e,[t(m,{to:"/my",class:v({active:e(a)=="/my"})},{default:u(()=>[i("\u53D1\u5E03("+r(e(s).passCount)+")",1)]),_:1},8,["class"]),t(m,{to:"/my/noPass",class:v({active:e(a)=="/my/noPass"})},{default:u(()=>[i("\u672A\u901A\u8FC7("+r(e(s).noPassCount)+")",1)]),_:1},8,["class"]),t(m,{to:"/my/auditing",class:v({active:e(a)=="/my/auditing"})},{default:u(()=>[i("\u5BA1\u6838\u4E2D("+r(e(s).auditingCount)+")",1)]),_:1},8,["class"]),t(m,{to:"/my/up",class:v({active:e(a)=="/my/up"})},{default:u(()=>[i("\u9876\u8FC7("+r(e(s).up)+")",1)]),_:1},8,["class"]),t(m,{to:"/my/down",class:v({active:e(a)=="/my/down"})},{default:u(()=>[i("\u8E29\u8FC7("+r(e(s).down)+")",1)]),_:1},8,["class"]),t(m,{to:"/my/star",class:v({active:e(a)=="/my/star"})},{default:u(()=>[i("\u6536\u85CF("+r(e(s).star)+")",1)]),_:1},8,["class"]),t(m,{to:"/my/history",class:v({active:e(a)=="/my/history"})},{default:u(()=>[i("\u5386\u53F2("+r(e(s).history)+")",1)]),_:1},8,["class"]),c("div",{class:"bar",style:G({transform:`translateX(${o.value}%)`})},null,4)]),(D(),O(ae,{key:e(a),"get-list":e(Z),form:{authorId:(b=e(s))==null?void 0:b.id,type:l.value},isMy:n.value},null,8,["get-list","form","isMy"])),t(ue,{visible:p.value,"onUpdate:visible":d[2]||(d[2]=k=>p.value=k),title:"\u4FEE\u6539\u6635\u79F0",onConfirm:$},{default:u(()=>[ee(c("input",{class:"input","onUpdate:modelValue":d[1]||(d[1]=k=>e(s).nickname=k),placeholder:"\u8BF7\u8F93\u5165\u65B0\u7684\u6635\u79F0",maxlength:"20"},null,512),[[se,e(s).nickname]])]),_:1},8,["visible"])],64)}}});const ye=U(me,[["__scopeId","data-v-6dd13e90"]]);export{ye as default};
