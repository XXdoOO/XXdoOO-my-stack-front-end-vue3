import{d as C,r as d,u as A,Q as I,Z as b,c as p,e as g,f as n,h as f,v as h,l as w,k as D,g as B,w as E,F as k,$ as V,a0 as U,y as S,x as j,B as N,C as T,A as R,t as L,_ as O,D as $}from"./index.b2c76cc9.js";const _=s=>(N("data-v-e37aa54c"),s=s(),T(),s),z={class:"info"},M={class:"title"},Q=_(()=>n("span",null,"\u6807\u9898\uFF1A",-1)),Z={class:"description"},q=_(()=>n("span",null,"\u63CF\u8FF0\uFF1A",-1)),G={class:"cover"},H=_(()=>n("span",null,"\u5C01\u9762\uFF1A",-1)),J=["src"],K=C({__name:"index",setup(s){var F;const i=d("\u5DF2\u5F00\u542F\u81EA\u52A8\u4FDD\u5B58"),e=d({id:(F=A().params.blogId)!=null?F:"",title:"",description:"",cover:"",content:"# \u8BF7\u4F7F\u7528markdown\u8BED\u6CD5\n ## \u5F00\u59CB\u4F60\u7684\u8868\u6F14\n```js\nlet f = new Func();\nconsole.log(f.__proto__); // Object\n```"});e.value.id&&I(e.value.id).then(o=>{e.value=o,o.cover&&(e.value.cover="/api/"+o.cover)});const r=d(),x=o=>{e.value.cover=URL.createObjectURL(o.target.files[0])},y=(o,t,u)=>{const a=new FormData;a.append("image",u[0]),a.append("blogId",e.value.id.toString()),V(a).then(c=>{t({url:"/api/"+c})})};b(()=>e,()=>{m()},{deep:!0});let v;const m=()=>{i.value="\u81EA\u52A8\u4FDD\u5B58\u4E2D...",clearTimeout(v),v=setTimeout(()=>{if(e.value.title.trim().length!=0&&e.value.description.trim().length!=0&&e.value.content.trim().length!=0){const o=r.value.files[0],t=new FormData;o&&t.append("coverImg",o);for(let u in e.value)t.append(`${u}`,e.value[u]);U(t).then(u=>{i.value="\u81EA\u52A8\u4FDD\u5B58\u6210\u529F\uFF01"})}else i.value="\u81EA\u52A8\u4FDD\u5B58\u5931\u8D25\uFF01\u8BF7\u5B8C\u5584\u4FE1\u606F\u6216\u68C0\u67E5\u7F51\u7EDC\uFF01"},2e3)};return(o,t)=>{const u=O,a=S,c=j("v-md-editor");return p(),g(k,null,[n("div",z,[n("label",M,[Q,f(n("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.value.title=l)},null,512),[[h,e.value.title]])]),n("label",Z,[q,f(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>e.value.description=l)},null,512),[[h,e.value.description]])]),n("label",G,[H,e.value.cover?D("",!0):(p(),w(u,{key:0,icon:"add",style:{"font-size":"25px"}})),e.value.cover?(p(),g("img",{key:1,src:e.value.cover,width:"50",height:"50"},null,8,J)):D("",!0),n("input",{type:"file",hidden:"",accept:".jpg,.png",ref_key:"coverImg",ref:r,onChange:x},null,544)]),B(a,{class:"post",onClick:m},{default:E(()=>[R(L(i.value),1)]),_:1})]),B(c,{modelValue:e.value.content,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.content=l),"disabled-menus":[],onUploadImage:y},null,8,["modelValue"])],64)}}});const W=$(K,[["__scopeId","data-v-e37aa54c"]]);export{W as default};
